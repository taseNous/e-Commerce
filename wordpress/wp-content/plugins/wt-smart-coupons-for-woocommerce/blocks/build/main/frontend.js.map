{"version":3,"file":"main/frontend.js","mappings":"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","sources":["webpack://wt-sc-blocks/external window [\"wc\",\"blocksCheckout\"]","webpack://wt-sc-blocks/external window [\"wc\",\"wcBlocksData\"]","webpack://wt-sc-blocks/external window [\"wp\",\"data\"]","webpack://wt-sc-blocks/external window [\"wp\",\"element\"]","webpack://wt-sc-blocks/external window [\"wp\",\"htmlEntities\"]","webpack://wt-sc-blocks/external window [\"wp\",\"i18n\"]","webpack://wt-sc-blocks/webpack/bootstrap","webpack://wt-sc-blocks/webpack/runtime/compat get default export","webpack://wt-sc-blocks/webpack/runtime/define property getters","webpack://wt-sc-blocks/webpack/runtime/hasOwnProperty shorthand","webpack://wt-sc-blocks/webpack/runtime/make namespace object","webpack://wt-sc-blocks/./src/main/frontend.js"],"sourcesContent":["module.exports = window[\"wc\"][\"blocksCheckout\"];","module.exports = window[\"wc\"][\"wcBlocksData\"];","module.exports = window[\"wp\"][\"data\"];","module.exports = window[\"wp\"][\"element\"];","module.exports = window[\"wp\"][\"htmlEntities\"];","module.exports = window[\"wp\"][\"i18n\"];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import metadata from './block.json';\nimport { useDispatch, useSelect } from '@wordpress/data';\nimport { __, sprintf, _n } from '@wordpress/i18n';\nimport { decodeEntities } from '@wordpress/html-entities';\nimport { CART_STORE_KEY, VALIDATION_STORE_KEY } from '@woocommerce/block-data';\nimport { useState, useEffect } from '@wordpress/element';\nimport { applyCheckoutFilter, extensionCartUpdate } from '@woocommerce/blocks-checkout';\n\n\n// Global import\nconst { registerCheckoutBlock } = wc.blocksCheckout;\n\n    \nexport const WtScBlocksMain = (() => {\n    const [couponCode, setCouponCode] = useState('');\n    const [isClickBinded, setIsClickBinded] = useState(false);\n    const { applyCoupon, removeCoupon } = useDispatch( CART_STORE_KEY );\n    const { createErrorNotice, createSuccessNotice } = useDispatch( 'core/notices' );\n\n    if ( ! isClickBinded ) {\n        \n        /* Set `true` for preventing multiple event binding */\n        setIsClickBinded(true);\n        \n        /* Click event triggered by plugin public JS file */\n        document.addEventListener('wt_sc_api_coupon_clicked', function(e){ \n\n            const couponCode = e.detail.coupon_code;\n            const couponId = e.detail.coupon_id;\n            const context = 'wc/cart'; /* message context */\n\n            applyCoupon(couponCode)\n                .then((response) => { \n                    \n                    /* Trigger a custom event */\n                    const coupon_click_done_event = new CustomEvent(\"wt_sc_api_coupon_click_done\", {\n                        detail:{ 'coupon_code' : couponCode, 'coupon_id': couponId, 'status': true}\n                    });\n                    document.dispatchEvent(coupon_click_done_event);\n\n                    /* Show success message */\n                    if (\n                        applyCheckoutFilter( {\n                            filterName: 'showApplyCouponNotice',\n                            defaultValue: true,\n                            arg: { couponCode, context },\n                        } )\n                    ) {\n                        createSuccessNotice(\n                            sprintf(\n                                /* translators: %s coupon code. */\n                                __('Coupon code \"%s\" has been applied to your cart.', 'wt-smart-coupons-for-woocommerce'),\n                                couponCode\n                            ),\n                            { id: 'coupon-form', type: 'snackbar', context }\n                        );\n                    }\n\n                })\n                .catch((error) => {            \n                    \n                    /* Trigger a custom event */\n                    const coupon_click_done_event = new CustomEvent(\"wt_sc_api_coupon_click_done\", {\n                        detail:{ 'coupon_code' : couponCode, 'coupon_id': couponId, 'status': false, 'message': error.message}\n                    });\n                    document.dispatchEvent(coupon_click_done_event);\n\n                    /* Show error message */\n                    createErrorNotice(\n                        error.message,\n                        {\n                            id: 'coupon-form',\n                            type: 'snackbar',\n                            context,\n                        }\n                    );\n                });    \n        });\n\n    }\n    \n    return '';\n});\n\nconst options = {\n    metadata,\n    component: WtScBlocksMain\n};\n\nregisterCheckoutBlock( options );\n"],"names":["metadata","useDispatch","useSelect","__","sprintf","_n","decodeEntities","CART_STORE_KEY","VALIDATION_STORE_KEY","useState","useEffect","applyCheckoutFilter","extensionCartUpdate","registerCheckoutBlock","wc","blocksCheckout","WtScBlocksMain","couponCode","setCouponCode","isClickBinded","setIsClickBinded","applyCoupon","removeCoupon","createErrorNotice","createSuccessNotice","document","addEventListener","e","detail","coupon_code","couponId","coupon_id","context","then","response","coupon_click_done_event","CustomEvent","dispatchEvent","filterName","defaultValue","arg","id","type","catch","error","message","options","component"],"sourceRoot":""}